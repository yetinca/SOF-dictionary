/*
    JSModel
    Copyright (c) 2014 Chad Kuehn (chadkuehn.com)
    Licensed under the MIT license (https://github.com/chadkuehn/JSModel/blob/master/LICENSE.txt)
    Version: 1.0.6
*/

function JSModel(){function n(e){var n;if(e in t){n=t[e]}return n}function s(){var n={};for(var r in t){var i=$("[name='"+r+"']");var s="";if(i.is("input")){s=i.attr("type")}else if(i.is("select")){s="select"}else if(i.is("textarea")){s="textarea"}switch(s){case"select":case"textarea":case"text":case"password":case"hidden":case undefined:if($.isArray(t[r])){t[r]=i.map(function(){return this.value}).get()}else{t[r]=i.val()}break;case"radio":t[r]=i.closest(":checked").val();break;case"checkbox":t[r]=i.closest(":checked").map(function(){return this.value}).get();break}var o=[];$("[name ^= '"+r+"['][name *= ']'").each(function(){var e=$(this);var t=e.attr("name");var i=e.val();if(e.is("input")){if(e.attr("type")=="checkbox"){if(e.is(":checked")){o.push(t)}return}}if(o.indexOf(t)>-1){i="true"}if(!isNaN(i)){if(i.indexOf(".")>-1){i=parseInt(i,10)}else{i=parseFloat(i,10)}}else if(i=="true"||i=="false"){i=i=="true"?true:false}var s=/\[(\d)\]/g;var u=s.exec(t);var a=[];while(u!=null){a.push(parseInt(u[1],10));u=s.exec(t)}var s=/\.([^/[]+)/g;var u=s.exec(t);var f=[];while(u!=null){f.push(u[1]);u=s.exec(t)}if(a.length!=f.length){return}f.unshift(r);var l=n;for(var c=0;c<f.length;c++){var h=f[c];var p=false;if(c==f.length-1){p=true}if(p){l[h]=i;return}var d=-1;if(!p){d=a[0];a.shift()}if(!(h in l)){l[h]=[]}l=l[h];for(var v=l.length;v<d+1;v++){l.push({})}l=l[d]}})}for(var r in n){t[r]=n[r]}if(e!=""){var u=$.ajax({url:e,type:"POST",async:false,contentType:"application/json;charset=utf-8;",dataType:"json",data:JSON.stringify(t)}).responseText;t=JSON.parse(u)}return t}var e="";var t;if(!function(n){var r=false;if(n.length>0){if(typeof n[0]==="object"){t=n[0];if(n.length>1){if(typeof n[1]==="string"){e=n[1];r=true}}else{r=true}}}return r}(arguments)){return}this.refresh=s;this.prop=n;for(var n in t){var r=t[n];if(typeof r=="string"){if(r.indexOf("/Date(")==0){var i=new Date(parseInt(r.substr(6)));t[n]=i}}}}